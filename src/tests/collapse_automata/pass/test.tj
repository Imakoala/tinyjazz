module main() = (o)
    shared (i, o) = 0
    n: 
        use o = m2(i)
    until
        |o -> reset n
        |i -> n

module m2(a) = (o)
    shared o = 0
    n1:
        o = a
    until 
        |o -> n2
    n2:
        o = not a
    until 
        |o -> n1